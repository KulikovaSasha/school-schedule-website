
{% extends "base.html" %}

{% block extra_css %}
<style>
    .schedule-form {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-group label {
        font-weight: bold;
        margin-bottom: 0.5rem;
        display: block;
        color: #2c3e50;
    }

    .form-control {
        width: 100%;
        padding: 10px 15px;
        border: 2px solid #e9ecef;
        border-radius: 6px;
        font-size: 16px;
        transition: border-color 0.3s ease;
    }

    .form-control:focus {
        border-color: #4CAF50;
        outline: none;
        box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
    }

    .days-checkbox {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 12px;
        padding: 15px;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        background-color: #f8f9fa;
    }

    .form-check {
        display: flex;
        align-items: center;
        padding: 8px;
        background: white;
        border-radius: 6px;
        border: 1px solid #dee2e6;
        transition: all 0.3s ease;
    }

    .form-check:hover {
        border-color: #4CAF50;
        background-color: #f8fff8;
    }

    .form-check-input {
        margin-right: 10px;
        width: 18px;
        height: 18px;
        cursor: pointer;
    }

    .form-check-label {
        cursor: pointer;
        font-weight: normal;
        margin-bottom: 0;
    }

    .form-text {
        font-size: 14px;
        color: #6c757d;
        margin-top: 5px;
    }

    .error {
        color: #dc3545;
        font-size: 14px;
        margin-top: 5px;
    }

    .btn-group {
        display: flex;
        gap: 15px;
        margin-top: 2rem;
        padding-top: 20px;
        border-top: 1px solid #e9ecef;
    }

    .btn {
        padding: 12px 25px;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
        text-align: center;
    }

    .btn-primary {
        background-color: #4CAF50;
        color: white;
    }

    .btn-primary:hover {
        background-color: #45a049;
        transform: translateY(-2px);
    }

    .btn-secondary {
        background-color: #6c757d;
        color: white;
    }

    .btn-secondary:hover {
        background-color: #5a6268;
    }

    .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 1.5rem;
    }

    .form-row .form-group {
        margin-bottom: 0;
    }

    h2 {
        text-align: center;
        color: #2c3e50;
        margin-bottom: 2rem;
        font-size: 2rem;
        font-weight: bold;
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
    @media (max-width: 768px) {
        .schedule-form {
            margin: 10px;
            padding: 15px;
        }

        .days-checkbox {
            grid-template-columns: 1fr;
        }

        .form-row {
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .btn-group {
            flex-direction: column;
        }

        .btn {
            width: 100%;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <h2>üìÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è</h2>

    <form method="POST" class="schedule-form">
        {{ form.hidden_tag() }}

        <div class="form-group">
            {{ form.title.label }}
            {{ form.title(class="form-control", placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û—Å–µ–Ω–Ω–∏–π —Å–µ–º–µ—Å—Ç—Ä 10–ê –∫–ª–∞—Å—Å–∞") }}
            {% if form.title.errors %}
                <div class="error">{{ form.title.errors[0] }}</div>
            {% endif %}
            <small class="form-text">–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–æ–Ω—è—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è</small>
        </div>

        <div class="form-group">
            {{ form.days.label }}
            <div class="days-checkbox">
                {% for value, label in form.days.choices %}
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="days" value="{{ value }}" id="day-{{ value }}">
                    <label class="form-check-label" for="day-{{ value }}">
                        {{ label }}
                    </label>
                </div>
                {% endfor %}
            </div>
            <small class="form-text">–í—ã–±–µ—Ä–∏—Ç–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ –¥–ª—è –∑–∞–Ω—è—Ç–∏–π (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)</small>
            {% if form.days.errors %}
                <div class="error">{{ form.days.errors[0] }}</div>
            {% endif %}
        </div>

        <div class="form-row">
            <div class="form-group">
                {{ form.lessons_per_day.label }}
                {{ form.lessons_per_day(class="form-control", min=1, max=20, value=6) }}
                {% if form.lessons_per_day.errors %}
                    <div class="error">{{ form.lessons_per_day.errors[0] }}</div>
                {% endif %}
                <small class="form-text">–û–±—ã—á–Ω–æ 6-8 —É—Ä–æ–∫–æ–≤ –≤ –¥–µ–Ω—å</small>
            </div>

            <div class="form-group">
                {{ form.start_time.label }}
                {{ form.start_time(class="form-control", placeholder="09:00", value="08:30") }}
                {% if form.start_time.errors %}
                    <div class="error">{{ form.start_time.errors[0] }}</div>
                {% endif %}
                <small class="form-text">–§–æ—Ä–º–∞—Ç: –ß–ß:MM (24 —á–∞—Å–∞)</small>
            </div>

            <div class="form-group">
                {{ form.lesson_duration.label }}
                {{ form.lesson_duration(class="form-control", min=30, max=120, value=45) }}
                {% if form.lesson_duration.errors %}
                    <div class="error">{{ form.lesson_duration.errors[0] }}</div>
                {% endif %}
                <small class="form-text">–û–±—ã—á–Ω–æ 45 –º–∏–Ω—É—Ç</small>
            </div>
        </div>

        <div class="btn-group">
            {{ form.submit(class="btn btn-primary") }}
            <a href="{{ url_for('main.dashboard') }}" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</a>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    const defaultDays = ['mon', 'tue', 'wed', 'thu', 'fri'];
    defaultDays.forEach(day => {
        const checkbox = document.getElementById('day-' + day);
        if (checkbox) {
            checkbox.checked = true;
        }
    });

    // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏
    const timeInput = document.querySelector('input[name="start_time"]');
    if (timeInput) {
        timeInput.addEventListener('blur', function() {
            const timePattern = /^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/;
            if (this.value && !timePattern.test(this.value)) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ß–ß:MM (–Ω–∞–ø—Ä–∏–º–µ—Ä, 09:00)');
                this.value = '08:30';
                this.focus();
            }
        });
    }

    // –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏
    const dayLabels = document.querySelectorAll('.form-check-label');
    dayLabels.forEach(label => {
        label.addEventListener('mouseenter', function() {
            this.style.color = '#4CAF50';
            this.style.fontWeight = 'bold';
        });

        label.addEventListener('mouseleave', function() {
            this.style.color = '';
            this.style.fontWeight = 'normal';
        });
    });
});
</script>
{% endblock %}